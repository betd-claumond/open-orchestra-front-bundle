<div id="{{ area.areaId }}">
    {# <legend style="background-color:#BADFF4;border:1px solid #000000;">AREA | {{ area.areaId }}</legend> #}
    {% for subArea in area.areas %}
        {% include "OpenOrchestraFrontBundle:Node:area.html.twig" with {"area" : subArea, "nodeId": nodeId} only %}
    {% endfor %}
    {% for blockReference in area.blocks %}
        <div>
            {# <legend style="background-color:#5D88B3;border:1px solid #000000;">NodeId : {{ blockReference.nodeId }} BlockId : {{ blockReference.blockId}} </legend> #}
            {% if blockReference.nodeId is sameas(0) %}
                {% set nodeReference = nodeId %}
            {% else %}
                {% set nodeReference = blockReference.nodeId %}
            {% endif %}
            {% set queryParams = app.request.query.all|merge({'module_parameters': app.request.attributes.get('_route_params')})|merge({'nodeId': nodeReference, 'blockId': blockReference.blockId }) %}
            {{ render_esi(url('open_orchestra_front_block', queryParams)) }}
        </div>
    {% endfor %}
</div>
