{##
 # This file is part of the PHPOrchestra\CMSBundle.
 #
 # @author NoÃ«l Gilain <noel.gilain@businessdecision.com>
 ##}

<fieldset id="{{ area.areaId }}" style="background-color:#98BDE2;border-color:#000000;margin-top:8px;">
    {#<legend style="background-color:#BADFF4;border:1px solid #000000;">AREA | {{ area.areaId }}</legend>#}
{% for subArea in area.areas %}
    {% include "PHPOrchestraFrontBundle:Node:area.html.twig" with {"area" : subArea, "nodeId": nodeId} only %}
{% endfor %}
{% for blockReference in area.blocks %}
    <fieldset style="background-color:#3B6691;border-color:#000000;margin-top:8px;">
        {#<legend style="background-color:#5D88B3;border:1px solid #000000;">#}
            {#NodeId : {{ blockReference.nodeId }} BlockId : {{ blockReference.blockId}}#}
        {#</legend>#}
        {% if blockReference.nodeId == 0 %}
            {% set nodeReference = nodeId %}
        {% else %}
            {% set nodeReference = blockReference.nodeId %}
        {% endif %}
        {% set queryParams = app.request.query.all|merge({'nodeId': nodeReference, 'blockId': blockReference.blockId }) %}
        {{ render_esi(url('php_orchestra_front_block', queryParams)) }}
    </fieldset>
{% endfor %}
</fieldset>
